<!DOCTYPE html>
<html lang="en-us">

	<head>
		<title> Metasploit &middot;  </title>

		<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.53" />


<script   src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">


<link rel="stylesheet" href="https://malicious.link/css/nix.css">


<link href="https://fonts.googleapis.com/css?family=Inconsolata|Open+Sans|Roboto|Montserrat|Concert+One" rel="stylesheet">



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
				  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-198967-1', 'auto');
	  ga('send', 'pageview');

</script>


	</head>

	<body>
		<header>
<nav class="navbar navbar-default navbar-fixed-top navbar-inverse font-header">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" id="green-terminal" href=https://malicious.link/>mubix@malicious.link ~ $</a>
		</div>

		
		<div class="collapse navbar-collapse" id="navbar-collapse-1">
			<ul class="nav navbar-nav navbar-right">
				<li>
					<a href="https://malicious.link/">/home/mubix</a>
				</li>

				
				
				<li >
					<a href="/brandon">~/brandon</a>
				</li>
				
				
				<li >
					<a href="/start">~/start</a>
				</li>
				
				
				<li >
					<a href="/about">~/about</a>
				</li>
				
				
				<li >
					<a href="/post">~/posts</a>
				</li>
				

			</ul>
		</div>
	</div>
</nav>
</header>

		<div class="container wrapper">
			<div class="row">
				<div class="col-xs-12 text-center">
					<h1 id=>Metasploit</h1>
				</div>
			</div>
			<ul id="post-list">
                	
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://malicious.link/post/2012/2012-02-11-ms08_068-ms10_046-fun-until-2018/">MS08_068 &#43; MS10_046 = FUN UNTIL 2018</a></h4>
							<h4 class="post-date">Feb 11, 2012</h4>
						</div>
						<div class="post-summary"><p>*TL;DR:* SMB Relay + LNK UNC icons = internal pentest pwnage
I need to touch on the highlights of two vulnerabilities before we talk about the fun stuff, but I highly encourage you to read the references at the bottom of this post and understand the vulnerabilities after you are done with my little trick, as you might find one of your own.
MS08_068: http://www.cvedetails.com/cve/CVE-2008-4037/
In 2008, Microsoft released MS08_068 which patched the &ldquo;SMB Relay&rdquo; attack.</p></div>
						<div class="post-list-footer text-center">
							<a href="https://malicious.link/post/2012/2012-02-11-ms08_068-ms10_046-fun-until-2018/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://malicious.link/post/2012/2012-01-03-uac-user-assisted-compromise/">(UAC) User Assisted Compromise</a></h4>
							<h4 class="post-date">Jan 3, 2012</h4>
						</div>
						<div class="post-summary"><p>A number of times during tests I&rsquo;ve actually run into those mythical creatures called &ldquo;patched windows machines&rdquo;. At DerbyCon Chris Gates and I released the &ldquo;Ask&rdquo; post module (which I had failed to publish). This module very simply uses the ShellExecute windows function.aspx&rdquo;) via Railgun with the undocumented (but very well known) operator of &lsquo;runas&rsquo;. These two lines accomplished that:
client.railgun.add_function( 'shell32', 'ShellExecuteA', 'DWORD',[[&quot;DWORD&quot;,&quot;hwnd&quot;,&quot;in&quot;],[&quot;PCHAR&quot;,&quot;lpOperation&quot;,&quot;in&quot;],[&quot;PCHAR&quot;,&quot;lpFile&quot;,&quot;in&quot;],[&quot;PCHAR&quot;,&quot;lpParameters&quot;,&quot;in&quot;],[&quot;PCHAR&quot;,&quot;lpDirectory&quot;,&quot;in&quot;],[&quot;DWORD&quot;,&quot;nShowCmd&quot;,&quot;in&quot;],]) client.railgun.shell32.ShellExecuteA(nil,&quot;runas&quot;,&quot;evil.exe&quot;,nil,nil,5)  This would quite simply prompt the user with that annoying UAC prompt asking the user to run &lsquo;evil.</p></div>
						<div class="post-list-footer text-center">
							<a href="https://malicious.link/post/2012/2012-01-03-uac-user-assisted-compromise/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://malicious.link/post/2011/2011-11-02-run-post-modules-on-all-sessions/">Run POST Modules On All Sessions</a></h4>
							<h4 class="post-date">Nov 2, 2011</h4>
						</div>
						<div class="post-summary"><p>Jcran recently blogged about an easy way to run a post module on all sessions:
http://blog.pentestify.com/simple-framework-domain-token-scanner
msf&gt; use post/windows/gather/enum_domain_tokens msf enum_domain_tokens&gt; irb framework.sessions.each do |session| run_single(&quot;set SESSION #{session.first}&quot;) run_single(&quot;run&quot;) sleep 1 end  You use the POST module, drop to IRB and run those 4 lines, and bam, you win. With resource files we can automate this a bit more and have it so that we do this effortlessly with any post module.</p></div>
						<div class="post-list-footer text-center">
							<a href="https://malicious.link/post/2011/2011-11-02-run-post-modules-on-all-sessions/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://malicious.link/post/2011/2011-10-09-msfconsole-prompt-fiddling/">MSFConsole Prompt Fiddling</a></h4>
							<h4 class="post-date">Oct 9, 2011</h4>
						</div>
						<div class="post-summary"><p>In @carnal0wnage and my presentation at DerbyCon 2011 we talked about using SCREEN and SCRIPT to keep connections live / use them across SSH sessions, and log everything that happens. What we didn&rsquo;t cover is the fact that there isn&rsquo;t a time stamp for those logs. Now, Metasploit has multiple ways of creating logs:
 cat ~/.msf4/logs/framework.log  This log automatically logs all of the error data that is great for trouble shooting when something is working, but doesn&rsquo;t record what you are doing inside of msfconsole  msf&gt; spool ~/myclient.</p></div>
						<div class="post-list-footer text-center">
							<a href="https://malicious.link/post/2011/2011-10-09-msfconsole-prompt-fiddling/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://malicious.link/post/2011/2011-10-06-the-dirty-little-secrets-they-didnt-teach-you-in-pentesting/">The Dirty Little Secrets They Didn&#39;t Teach You In Pentesting Class</a></h4>
							<h4 class="post-date">Oct 6, 2011</h4>
						</div>
						<div class="post-summary"><p>Video:  Slides: The Dirty Little Secrets They Didn&rsquo;t Teach You In Pentesting Class [slideshare id=9530403]
Code: https://github.com/mubix/Not-In-Pentesting-Class</p></div>
						<div class="post-list-footer text-center">
							<a href="https://malicious.link/post/2011/2011-10-06-the-dirty-little-secrets-they-didnt-teach-you-in-pentesting/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://malicious.link/post/2011/2011-07-17-metasploit-payloads-explained-part-1b/">Metasploit Payloads Explained - Part 1b</a></h4>
							<h4 class="post-date">Jul 17, 2011</h4>
						</div>
						<div class="post-summary"><p>This series was interrupted a bit by the new Metasploit HTTP/HTTPS payloads (more info). Definitely not complaining though as the new features *(as will be discussed in part 2) are some epic new additions to the payloads list. However an important change happened while the craziness over the new payloads was going on. ScriptJunkie snuck in an awesome change to msfvenom (a.k.a. msffsm).
Here is the link to the ticket about the change (link) and the revision (r13057)</p></div>
						<div class="post-list-footer text-center">
							<a href="https://malicious.link/post/2011/2011-07-17-metasploit-payloads-explained-part-1b/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://malicious.link/post/2011/2011-06-26-metasploit-payloads-explained-part-1a/">Metasploit Payloads Explained - Part 1a</a></h4>
							<h4 class="post-date">Jun 26, 2011</h4>
						</div>
						<div class="post-summary"><p>In Part 1 I gave an example I used at CCDC with the single &lsquo;windows/download_exec&rsquo;. One of the down sides of that payload is you need to host the binary, giving up an IP/host that can be blocked. Well, Google recently (a couple months ago) allowed people to upload &lsquo;anything&rsquo; to Google docs. And you can then share these files publicly. Probably already see where I&rsquo;m going with this, but here are some steps to get it going, first upload your malicious binary (not the dropper &lsquo;windows/download_exec&rsquo;, but the file it needs to execute).</p></div>
						<div class="post-list-footer text-center">
							<a href="https://malicious.link/post/2011/2011-06-26-metasploit-payloads-explained-part-1a/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://malicious.link/post/2011/2011-06-26-metasploit-payloads-explained-part-1/">Metasploit Payloads Explained - Part 1</a></h4>
							<h4 class="post-date">Jun 26, 2011</h4>
						</div>
						<div class="post-summary"><p>Payload selection is something that rarely gets talked about in detail. Most PoCs just use calc.exe, netcat, or some kind of socket. The vast majority of Metasploit tutorials, videos and documentation use the _windows/meterpreter/reverse_tcp_ payload which is only one of 224 possible payloads. Here is a little disclaimer: While the payloads in Metasploit don&rsquo;t get updated as much as other parts of Metasploit, this is a point in time documentation of them (June 23, 2011) and the payloads available in Metasploit are constantly changing.</p></div>
						<div class="post-list-footer text-center">
							<a href="https://malicious.link/post/2011/2011-06-26-metasploit-payloads-explained-part-1/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://malicious.link/post/2011/2011-05-30-remotely-suspend-all-threads-with-meterpreter/">Remotely Suspend All Threads with Meterpreter</a></h4>
							<h4 class="post-date">May 30, 2011</h4>
						</div>
						<div class="post-summary"><p>Just a follow up to my previous post. One of the things that sets that method apart is the fact that the suspension (once the DLL injection occurs) comes from within the process, and it suspends all the child processes as well.
Another way you can do this without the injection is just sending a suspend to all the threads in the process.
pid = 2980 targetprocess = client.sys.process.open(pid, PROCESS_ALL_ACCESS) targetprocess.</p></div>
						<div class="post-list-footer text-center">
							<a href="https://malicious.link/post/2011/2011-05-30-remotely-suspend-all-threads-with-meterpreter/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://malicious.link/post/2011/2011-05-30-remote-dll-injection-with-meterpreter/">Remote DLL Injection with Meterpreter</a></h4>
							<h4 class="post-date">May 30, 2011</h4>
						</div>
						<div class="post-summary"><p>Recently Didier Stevens wrote &lsquo;Suspender.dll&rsquo; which is a DLL that will suspend a process and all of it&rsquo;s child processes after a delay. 60 seconds is it&rsquo;s default but you can rename the DLL to add a number (as such &lsquo;Suspender10.dll&rsquo; for 10 seconds) to make the delay whatever you wish. You can find the blog post and download here: http://blog.didierstevens.com/2011/04/27/suspender-dll/
Jonathan Cran and I had the same idea, as I&rsquo;m sure many others did as well.</p></div>
						<div class="post-list-footer text-center">
							<a href="https://malicious.link/post/2011/2011-05-30-remote-dll-injection-with-meterpreter/">Read More</a>
						</div>
					</div>
				</li>
			
			</ul>
            

<div class="pagination-wrapper text-center">
  <ul class="pagination">
      
      <li>
          <a href="/categories/metasploit/" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      
      <li
      >
          <a href="/categories/metasploit/page/2/" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
      </li>
      
      <li
      ><a href="/categories/metasploit/">1</a></li>
      
      <li
      ><a href="/categories/metasploit/page/2/">2</a></li>
      
      <li
      class="active"><a href="/categories/metasploit/page/3/">3</a></li>
      
      <li
      ><a href="/categories/metasploit/page/4/">4</a></li>
      
      <li
      ><a href="/categories/metasploit/page/5/">5</a></li>
      
      <li
      ><a href="/categories/metasploit/page/6/">6</a></li>
      
      <li
      >
          <a href="/categories/metasploit/page/4/" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
      </li>
      
      <li>
          <a href="/categories/metasploit/page/6/" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
      
    </ul>
</div>



			<div class="push"></div>
		</div>
		<footer class="footer text-center">
<p>Copyright &copy; 2019 Malicious.Link -
<span class="credit">
	Powered by
	<a target="_blank" href="https://gohugo.io">Hugo</a>
	and
	<a target="_blank" href="https://github.com/LordMathis/hugo-theme-nix/">Nix</a> theme.
</span>
</p>

</footer>

	</body>
</html>
