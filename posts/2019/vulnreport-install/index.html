<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>VulnReport Install - Malicious Link - Blog by mubix - Rob Fuller</title><meta name="Description" content="This is a cool blog"><meta property="og:title" content="VulnReport Install" />
<meta property="og:description" content="A co-worker referenced a pretty cool tool released by @SalesForce&rsquo;s security team called &ldquo;VulnReport&rdquo;
I wanted to try it out so I checked out their Github report to start the install: https://github.com/salesforce/vulnreport - but there really wasn&rsquo;t much in the way of documentation on how to get it rolling unless you were deploying it to a Heroku app. I&rsquo;m not really a fan of putting vulnerability information, especially Red Team findings into the cloud so I decided to deploy it locally." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://malicious.link/posts/2019/vulnreport-install/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-02-28T09:30:44-05:00" />
<meta property="article:modified_time" content="2019-02-28T09:30:44-05:00" /><meta property="og:site_name" content="My cool site" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="VulnReport Install"/>
<meta name="twitter:description" content="A co-worker referenced a pretty cool tool released by @SalesForce&rsquo;s security team called &ldquo;VulnReport&rdquo;
I wanted to try it out so I checked out their Github report to start the install: https://github.com/salesforce/vulnreport - but there really wasn&rsquo;t much in the way of documentation on how to get it rolling unless you were deploying it to a Heroku app. I&rsquo;m not really a fan of putting vulnerability information, especially Red Team findings into the cloud so I decided to deploy it locally."/>
<meta name="application-name" content="malicious.link">
<meta name="apple-mobile-web-app-title" content="malicious.link"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://malicious.link/posts/2019/vulnreport-install/" /><link rel="prev" href="https://malicious.link/posts/2018/2019-shmoocon-hiring-list/" /><link rel="next" href="https://malicious.link/posts/2019/bash-golf-with-whois/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "VulnReport Install",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/malicious.link\/posts\/2019\/vulnreport-install\/"
        },"genre": "posts","keywords": "redteam, reporting","wordcount":  1619 ,
        "url": "https:\/\/malicious.link\/posts\/2019\/vulnreport-install\/","datePublished": "2019-02-28T09:30:44-05:00","dateModified": "2019-02-28T09:30:44-05:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Rob Fuller"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('dark' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'dark' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Malicious Link - Blog by mubix - Rob Fuller"># malicious.link</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/about"> About </a><a class="menu-item" href="/brandon"> Brandon </a><a class="menu-item" href="/categories"> Categories </a><a class="menu-item" href="/posts"> Posts </a><a class="menu-item" href="/start"> Start </a><a class="menu-item" href="/tags"> Tags </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Malicious Link - Blog by mubix - Rob Fuller"># malicious.link</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/about" title="">About</a><a class="menu-item" href="/brandon" title="">Brandon</a><a class="menu-item" href="/categories" title="">Categories</a><a class="menu-item" href="/posts" title="">Posts</a><a class="menu-item" href="/start" title="">Start</a><a class="menu-item" href="/tags" title="">Tags</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">VulnReport Install</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://twitter.com/mubix" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Rob Fuller</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2019-02-28">2019-02-28</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1619 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;8 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>A co-worker referenced a pretty cool tool released by <a href="https://twitter.com/SecureCloudDev" target="_blank" rel="noopener noreffer ">@SalesForce&rsquo;s security team</a> called &ldquo;<a href="http://vulnreport.io" target="_blank" rel="noopener noreffer ">VulnReport</a>&rdquo;</p>
<p><a href="http://vulnreport.io" target="_blank" rel="noopener noreffer "><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/2019/vulnreport_web.png"
        data-srcset="/images/2019/vulnreport_web.png, /images/2019/vulnreport_web.png 1.5x, /images/2019/vulnreport_web.png 2x"
        data-sizes="auto"
        alt="/images/2019/vulnreport_web.png"
        title="/images/2019/vulnreport_web.png" /></a></p>
<p>I wanted to try it out so I checked out their Github report to start the install: <a href="https://github.com/salesforce/vulnreport" target="_blank" rel="noopener noreffer ">https://github.com/salesforce/vulnreport</a> - but there really wasn&rsquo;t much in the way of documentation on how to get it rolling unless you were deploying it to a Heroku app. I&rsquo;m not really a fan of putting vulnerability information, especially Red Team findings into the cloud so I decided to deploy it locally. Here are the steps I went through to install it and get it up and running:</p>
<p><strong>Note:</strong> I started with a Debian 9.3 ISO that I had on-hand, if you use another repo your mileage may vary.</p>
<h4 id="install-dependancies">Install dependancies:</h4>
<p>This project uses Ruby, and many of the gems needed for the project require compiling in libraries.</p>
<ul>
<li><code>apt install -y git ruby ruby-dev ruby-bundler build-essential libssl-dev libpq-dev zlib1g-dev postgresql-server-dev-all authbind</code></li>
</ul>
<p>Next we install a Redis and Postgres server. If you already have these on the system or wish to use an established server on another systems you can most definitely do that instead of this step.</p>
<ul>
<li><code>apt install -y redis-server postgresql</code></li>
</ul>
<h4 id="setup-database">Setup Database</h4>
<p>Next we just need to create the database and user we will be using for the database:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root@vulnreportio:~# su - postgres
</span></span><span class="line"><span class="cl">postgres@vulnreportio:~$ createuser -P vulnreportuser
</span></span><span class="line"><span class="cl">Enter password for new role: vulnreportpassword (NOT DISPLAYED)
</span></span><span class="line"><span class="cl">Enter it again: vulnreportpassword (NOT DISPLAYED)
</span></span><span class="line"><span class="cl">postgres@vulnreportio:~$ createdb -O vulnreportuser vulnreportdb
</span></span><span class="line"><span class="cl">postgres@vulnreportio:~$ exit
</span></span><span class="line"><span class="cl">logout
</span></span><span class="line"><span class="cl">root@vulnreportio:~#
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="clone-the-repo">Clone the repo</h4>
<p>Toss the repo in <code>/opt/</code> so that we can run this under another user to better secure it later but just for example we&rsquo;ll get this running as <code>root</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root@vulnreportio:~# cd /opt/
</span></span><span class="line"><span class="cl">root@vulnreportio:/opt# git clone https://github.com/salesforce/vulnreport
</span></span><span class="line"><span class="cl">Cloning into &#39;vulnreport&#39;...
</span></span><span class="line"><span class="cl">remote: Enumerating objects: 1191, done.
</span></span><span class="line"><span class="cl">remote: Total 1191 (delta 0), reused 0 (delta 0), pack-reused 1191
</span></span><span class="line"><span class="cl">Receiving objects: 100% (1191/1191), 2.93 MiB | 3.92 MiB/s, done.
</span></span><span class="line"><span class="cl">Resolving deltas: 100% (694/694), done.
</span></span><span class="line"><span class="cl">root@vulnreportio:/opt# cd vulnreport/
</span></span><span class="line"><span class="cl">root@vulnreportio:/opt/vulnreport#
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="setup-ruby">Setup Ruby</h4>
<p>At the current version the Ruby version is fixed to <code>2.1.2</code> but works just fine with later versions so you can remove the fixed Ruby version in the <code>Gemfile</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root@vulnreportio:/opt/vulnreport# bundle install
</span></span><span class="line"><span class="cl">Don&#39;t run Bundler as root. Bundler can ask for sudo if it is needed, and installing your bundle as root will break this application for all non-root users on this machine.
</span></span><span class="line"><span class="cl">Your Ruby version is 2.3.3, but your Gemfile specified 2.1.2
</span></span></code></pre></td></tr></table>
</div>
</div><p>Just comment out the line and things should work:</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/2019/vulnreport_gemfile.png"
        data-srcset="/images/2019/vulnreport_gemfile.png, /images/2019/vulnreport_gemfile.png 1.5x, /images/2019/vulnreport_gemfile.png 2x"
        data-sizes="auto"
        alt="/images/2019/vulnreport_gemfile.png"
        title="/images/2019/vulnreport_gemfile.png" /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="n">root</span><span class="o">@</span><span class="n">vulnreportio</span><span class="p">:</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">vulnreport</span><span class="c1"># bundle install
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Don</span><span class="s1">&#39;t run Bundler as root. Bundler can ask for sudo if it is needed, and installing your bundle as root will break this application for all non-root users on this
</span></span></span><span class="line"><span class="cl"><span class="s1">machine.
</span></span></span><span class="line"><span class="cl"><span class="s1">Fetching gem metadata from https://rubygems.org/..............
</span></span></span><span class="line"><span class="cl"><span class="s1">Fetching version metadata from https://rubygems.org/...
</span></span></span><span class="line"><span class="cl"><span class="s1">Fetching dependency metadata from https://rubygems.org/..
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing i18n 0.7.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Using json 1.8.3
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing minitest 5.8.4
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing thread_safe 0.3.5
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing addressable 2.4.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing builder 3.2.2
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing mini_portile2 2.0.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing bcrypt 3.1.11 with native extensions
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing chronic 0.10.2
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing daemons 1.2.3
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing fastercsv 1.5.5
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing json_pure 1.8.3
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing multi_json 1.11.3
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing stringex 1.5.1
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing uuidtools 2.1.5
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing dotenv 2.1.1
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing eventmachine 1.0.7 with native extensions
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing multi_xml 0.5.5
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing rack 1.6.4
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing systemu 2.6.5
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing mime-types-data 3.2016.0221
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing multipart-post 2.0.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing nori 2.6.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing oauth 0.5.1
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing pdfkit 0.8.2
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing pg 0.18.4 with native extensions
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing redis 3.3.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing rubyzip 1.2.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing rufus-scheduler 3.2.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing tilt 2.0.2
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing wkhtmltopdf-heroku 2.12.3.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing xml-simple 1.1.5
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing yard 0.8.7.6
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing yard-dm 0.1.1
</span></span></span><span class="line"><span class="cl"><span class="s1">Using bundler 1.13.6
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing tzinfo 1.2.2
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing dm-core 1.2.1
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing data_objects 0.10.17
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing gyoku 1.3.1
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing nokogiri 1.6.7.2 with native extensions
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing bcrypt-ruby 3.1.5
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing rollbar 2.10.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing httparty 0.13.7
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing httpi 2.4.1
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing rack-protection 1.5.3
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing rack-ssl 1.4.1
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing rack_csrf 2.5.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing thin 1.6.4 with native extensions
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing macaddr 1.7.1
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing mime-types 3.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing rforce 0.13
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing yard-sinatra 1.0.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing activesupport 4.2.6
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing dm-aggregates 1.2.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing dm-constraints 1.2.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing dm-migrations 1.2.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing dm-serializer 1.2.2
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing dm-timestamps 1.2.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing dm-transactions 1.2.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing dm-validations 1.2.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing dm-do-adapter 1.2.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing do_postgres 0.10.17 with native extensions
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing akami 1.3.1
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing dm-types 1.2.2
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing wasabi 3.5.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing sinatra 1.4.7
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing uuid 2.3.8
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing mail 2.6.4
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing dm-postgres-adapter 1.2.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing data_mapper 1.2.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing savon 2.11.1
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing ruby-saml 1.0.0
</span></span></span><span class="line"><span class="cl"><span class="s1">Installing pony 1.11
</span></span></span><span class="line"><span class="cl"><span class="s1">Bundle complete! 29 Gemfile dependencies, 73 gems now installed.
</span></span></span><span class="line"><span class="cl"><span class="s1">Use `bundle show [gemname]` to see where a bundled gem is installed.
</span></span></span><span class="line"><span class="cl"><span class="s1">Post-install message from bcrypt-ruby:
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">#######################################################
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">The bcrypt-ruby gem has changed its name to just bcrypt.  Instead of
</span></span></span><span class="line"><span class="cl"><span class="s1">installing `bcrypt-ruby`, you should install `bcrypt`.  Please update your
</span></span></span><span class="line"><span class="cl"><span class="s1">dependencies accordingly.
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">#######################################################
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">Post-install message from httparty:
</span></span></span><span class="line"><span class="cl"><span class="s1">When you HTTParty, you must party hard!
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="configure-vulnreport">Configure VulnReport</h4>
<ul>
<li>Create a <code>.env</code> file that looks like this:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">export</span> <span class="n">RACK_ENV</span><span class="o">=</span><span class="n">production</span>
</span></span><span class="line"><span class="cl"><span class="k">export</span> <span class="n">VR_SESSION_SECRET</span><span class="o">=</span><span class="n">ADD_RANDOM_STRING_HERE</span>
</span></span><span class="line"><span class="cl"><span class="k">export</span> <span class="n">DATABASE_URL</span><span class="o">=</span><span class="n">postgres</span><span class="p">:</span><span class="o">//</span><span class="n">vulnreportuser</span><span class="p">:</span><span class="n">vulnreportpassword</span><span class="err">@</span><span class="n">localhost</span><span class="p">:</span><span class="mi">5432</span><span class="o">/</span><span class="n">vulnreportdb</span>
</span></span><span class="line"><span class="cl"><span class="k">export</span> <span class="n">REDIS_URL</span><span class="o">=</span><span class="n">redis</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">6379</span><span class="o">/</span>
</span></span><span class="line"><span class="cl"><span class="k">export</span> <span class="n">ROLLBAR_ACCESS_TOKEN</span><span class="o">=</span><span class="n">ROLLBARTOKEN</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/2019/vulnreport_env.png"
        data-srcset="/images/2019/vulnreport_env.png, /images/2019/vulnreport_env.png 1.5x, /images/2019/vulnreport_env.png 2x"
        data-sizes="auto"
        alt="/images/2019/vulnreport_env.png"
        title="/images/2019/vulnreport_env.png" /></p>
<p>Next we want to replace the <code>VR_SESSION_SECRET</code> with a strong relatively random string. I used a <code>sha256</code> hash of a OpenSSL random string. It&rsquo;s definitely not perfect random but it&rsquo;s in the good-enough realm that it would be very hard for someone to brute force it.</p>
<p><code>sed -i  &quot;s/ADD_RANDOM_STRING_HERE/$(openssl rand -base64 32 | sha256sum | cut -d ' ' -f 1 )/&quot; .env</code></p>
<p>After we are done we&rsquo;ll have something like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root@vulnreportio:/opt/vulnreport# cat .env
</span></span><span class="line"><span class="cl">export RACK_ENV=production
</span></span><span class="line"><span class="cl">export VR_SESSION_SECRET=0e40e9367e35bc7f6f6a0e1966a8c108c87b7f6a60e96c119779ae3b1dc08352
</span></span><span class="line"><span class="cl">export DATABASE_URL=postgres://vulnreportuser:vulnreportpassword@localhost:5432/vulnreportdb
</span></span><span class="line"><span class="cl">export REDIS_URL=redis://localhost:6379/
</span></span><span class="line"><span class="cl">export ROLLBAR_ACCESS_TOKEN=ROLLBARTOKEN
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="create-a-self-signed-cert">Create a self-signed cert</h4>
<p>VulnReport looks for it&rsquo;s SSL certificate in the same directory as it&rsquo;s started in and called <code>server.key</code> so we create a self-signed certifcate in the same directory as the git repo:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root@vulnreportio:/opt/vulnreport# openssl req -new -newkey rsa:2048 -days 365 -nodes -x509 -keyout server.key -out server.crt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Generating a RSA private key
</span></span><span class="line"><span class="cl">........+++++
</span></span><span class="line"><span class="cl">.......................................................+++++
</span></span><span class="line"><span class="cl">writing new private key to &#39;server.key&#39;
</span></span><span class="line"><span class="cl">-----
</span></span><span class="line"><span class="cl">You are about to be asked to enter information that will be incorporated
</span></span><span class="line"><span class="cl">into your certificate request.
</span></span><span class="line"><span class="cl">What you are about to enter is what is called a Distinguished Name or a DN.
</span></span><span class="line"><span class="cl">There are quite a few fields but you can leave some blank
</span></span><span class="line"><span class="cl">For some fields there will be a default value,
</span></span><span class="line"><span class="cl">If you enter &#39;.&#39;, the field will be left blank.
</span></span><span class="line"><span class="cl">-----
</span></span><span class="line"><span class="cl">Country Name (2 letter code) [AU]:
</span></span><span class="line"><span class="cl">State or Province Name (full name) [Some-State]:
</span></span><span class="line"><span class="cl">Locality Name (eg, city) []:
</span></span><span class="line"><span class="cl">Organization Name (eg, company) [Internet Widgits Pty Ltd]:
</span></span><span class="line"><span class="cl">Organizational Unit Name (eg, section) []:
</span></span><span class="line"><span class="cl">Common Name (e.g. server FQDN or YOUR name) []:
</span></span><span class="line"><span class="cl">Email Address []:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">root@vulnreportio:/opt/vulnreport# ls -alh server.*
</span></span><span class="line"><span class="cl">-rw-r--r-- 1 root root 1.3K Feb 28 19:56 server.crt
</span></span><span class="line"><span class="cl">-rw------- 1 root root 1.7K Feb 28 19:56 server.key
</span></span></code></pre></td></tr></table>
</div>
</div><p>Of course feel free to put in any information you wish in the certificate, I just went with the defaults to make it easy.</p>
<h4 id="start-vulnreport">Start VulnReport</h4>
<p>First we need to SEED the database with information and tables using the <code>SEED.rb</code> file:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root@vulnreportio:/opt/vulnreport# ruby SEED.rb
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Vulnreport 3.0.3 seed script
</span></span><span class="line"><span class="cl">WARNING: This script should be run ONCE immediately after deploying and then DELETED
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Setting up Vulnreport now...
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Setting up the PostgreSQL database...
</span></span><span class="line"><span class="cl">        Done
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Seeding the database...
</span></span><span class="line"><span class="cl">        Done
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">User ID 1 created for you
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ALL DONE! :)
</span></span><span class="line"><span class="cl">Login to Vulnreport now and go through the rest of the settings!
</span></span></code></pre></td></tr></table>
</div>
</div><p>Then we can start up the application:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root@vulnreportio:/opt/vulnreport# ./start.sh
</span></span><span class="line"><span class="cl">Using rack adapter
</span></span><span class="line"><span class="cl">[28/Feb/2019 19:59:02] WARNING: RUNNING IN DEVELOPMENT ENVIRONMENT
</span></span><span class="line"><span class="cl">[28/Feb/2019 19:59:02] Dev environment: CRON JOBS SCHEDULER NOT ENABLED
</span></span><span class="line"><span class="cl">[28/Feb/2019 19:59:02] VRCron Registered: Monthly Allocation Notification
</span></span><span class="line"><span class="cl">[28/Feb/2019 19:59:02]  Type: cron, Schedule: 0 7 1 * *
</span></span><span class="line"><span class="cl">[28/Feb/2019 19:59:02]  Cron registered as not enabled, did not schedule
</span></span><span class="line"><span class="cl">[28/Feb/2019 19:59:02] VRCron Registered: Monthly Allocation Preset
</span></span><span class="line"><span class="cl">[28/Feb/2019 19:59:02]  Type: cron, Schedule: 0 0 1 * *
</span></span><span class="line"><span class="cl">[28/Feb/2019 19:59:02]  Cron registered as not enabled, did not schedule
</span></span><span class="line"><span class="cl">Thin web server (v1.6.4 codename Gob Bluth)
</span></span><span class="line"><span class="cl">Maximum connections set to 1024
</span></span><span class="line"><span class="cl">Listening on 0.0.0.0:443, CTRL+C to stop
</span></span></code></pre></td></tr></table>
</div>
</div><p>Once it&rsquo;s started, we can log in with the default user <code>admin</code> and the default password <code>admin</code> which is quite hilariously ironic for a vulnerability reporting platform. I think the SEED file should be updated to add a vulnerability report example including the default password for it&rsquo;s own service.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/2019/vulnreport_start.png"
        data-srcset="/images/2019/vulnreport_start.png, /images/2019/vulnreport_start.png 1.5x, /images/2019/vulnreport_start.png 2x"
        data-sizes="auto"
        alt="/images/2019/vulnreport_start.png"
        title="/images/2019/vulnreport_start.png" /></p>
<p>There are quite a few bugs that I&rsquo;ve run into that result in a &lsquo;NulClass&rsquo;. I think this is the result of lacking enough SEED data. But once you create a user, vuln, or whatever, you&rsquo;ll get this error but the creat will go through and you only really see this error once per action type.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/2019/vulnreport_nilclass.png"
        data-srcset="/images/2019/vulnreport_nilclass.png, /images/2019/vulnreport_nilclass.png 1.5x, /images/2019/vulnreport_nilclass.png 2x"
        data-sizes="auto"
        alt="/images/2019/vulnreport_nilclass.png"
        title="/images/2019/vulnreport_nilclass.png" /></p>
<p>Side note: I submitted this install guide as a short version to the repository itself because of the lacking installation steps here: <a href="https://github.com/salesforce/vulnreport/pull/30" target="_blank" rel="noopener noreffer ">https://github.com/salesforce/vulnreport/pull/30</a> but they require you to sign a document before they will accept pull requests: <a href="https://cla.salesforce.com/sign-cla" target="_blank" rel="noopener noreffer ">https://cla.salesforce.com/sign-cla</a>. I don&rsquo;t really have time to look over that document nor do I want to spend the time to get a lawyer to do so, so I will leave it at making a blog post about how to install it and hope that is enough to help others get this installed.</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2019-02-28</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://malicious.link/posts/2019/vulnreport-install/" data-title="VulnReport Install" data-via="mubix" data-hashtags="redteam,reporting"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://malicious.link/posts/2019/vulnreport-install/" data-hashtag="redteam"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="https://malicious.link/posts/2019/vulnreport-install/"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://malicious.link/posts/2019/vulnreport-install/" data-title="VulnReport Install"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Reddit" data-sharer="reddit" data-url="https://malicious.link/posts/2019/vulnreport-install/"><i class="fab fa-reddit fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://malicious.link/posts/2019/vulnreport-install/" data-title="VulnReport Install"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Evernote" data-sharer="evernote" data-url="https://malicious.link/posts/2019/vulnreport-install/" data-title="VulnReport Install"><i class="fab fa-evernote fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/redteam/">redteam</a>,&nbsp;<a href="/tags/reporting/">reporting</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/2018/2019-shmoocon-hiring-list/" class="prev" rel="prev" title="2019 ShmooCon Hiring List"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>2019 ShmooCon Hiring List</a>
            <a href="/posts/2019/bash-golf-with-whois/" class="next" rel="next" title="Bash Golf with Whois">Bash Golf with Whois<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2005 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://twitter.com/mubix" target="_blank">Rob Fuller</a></span>&nbsp;|&nbsp;<span class="license">All Rights Reserved</span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":100},"comment":{},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
